//test return 0

//test the pixel lab from 15122

typedef int pixel;       // Library (concrete) view of a pixel
typedef pixel pixelt;   // Client  (abstract) view of a pixel

// Returns the red component of the given pixel p.
// @ensures \result <= 255 && \result >= 0;
int getred(pixel p)
//@ensures \result <= 255 && \result >= 0;
{
 return ( (p& 0x00FF0000) >> 16);
}

// Returns the green component of the given pixel p.
// @ensures \result <= 255 && \result >= 0;
int getgreen(pixel p)
//@ensures \result <= 255 && \result >= 0;
{
 return ((p & 0x0000FF00) >> 8);
}

// Returns the blue component of the given pixel p.
// @ensures \result <= 255 && \result >= 0;
int getblue(pixel p)
//@ensures \result <= 255 && \result >= 0;
{
 return (p & 0x000000FF);
}

// Returns the alpha component of the given pixel p.
// @ensures \result <= 255 && \result >= 0;
int getalpha(pixel p)
//@ensures \result <= 255 && \result >= 0;
{
 return ((p >> 24)&(0x000000FF));
}

pixel makepixel(int alpha, int red, int green, int blue)
/*@requires alpha >= 0 && alpha <= 255
 @     && red >= 0 && red <= 255
 @      && green >= 0 && green <= 255
 @      && blue >= 0 && blue <= 255;
 @*/
{
 return((alpha << 24)|(red << 16)| (green << 8)| (blue));
}
                                                                                     

void histogram(pixelt[] A, int length, int[] results)
//@requires \length(A) == length;
//@requires \length(results) == 256;
{
  int[] tempArray = alloc_array(int, 256);

  for (int i = 0; i < length; i++)
  //@loopinvariant 0 <= i;
  {
    pixelt p = A[i];
    int average = (getred(p) + getgreen(p) + getblue(p)) / 3;
    tempArray[average] = tempArray[average] + 1;
  }
  for(int i = 0; i < 256; i++)
  {
    results[i] = tempArray[i];
  }
}
int main() {
  pixelt[] A;
  pixelt[] C;
  int[] results = alloc_array(int, 256);
  A = alloc_array(pixelt, 9);
  A[0] = makepixel(0xFF, 0x01, 0x01, 0x01);
  A[1] = makepixel(0x01, 0x00, 0xFF, 0xEE);
  A[2] = makepixel(0xFF, 0xFF, 0xFF, 0xFF);
  A[3] = makepixel(0xEE, 0xFF, 0xDD, 0x00);
  A[4] = makepixel(0xDD, 0xCC, 0x00, 0xFF);
  A[5] = makepixel(0xCC, 0x00, 0xDD, 0xEE);
  A[6] = makepixel(0x00, 0xEE, 0xFF, 0xDD);
  A[7] = makepixel(0x00, 0x00, 0x00, 0x00);
  A[8] = makepixel(0x00, 0xDD, 0xCC, 0xBB);
  histogram(A, 9, results);
  for (int i = 0; i < 256; i++) {
         if (i == 0x00) assert(results[i] == 1);
    else if (i == 0x01) assert(results[i] == 1);
    else if (i == 0xCC) assert(results[i] == 1);
    else if (i == 0xEE) assert(results[i] == 1);
    else if (i == 0xFF) assert(results[i] == 1);
    else if (i == 0x99) assert(results[i] == 2);
    else if (i == 0x9E) assert(results[i] == 1);
    else if (i == 0xA4) assert(results[i] == 1);
    else assert(results[i] == 0);
  }
  return 0;
}